<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
  <button id="new_tweets"> New tweets? </button>
    <script>
      $("#new_tweets").on("click", updateTweets);

      var first_undisplayed = 0;

      $(document).ready(function(){
        var $body = $('body');
        // $body.html('');

        // var index = streams.home.length - 1;
        // while(index >= 0){
        //   var tweet = streams.home[index];
        //   var $tweet = $('<div></div>');
        //   $tweet.text('@' + tweet.user + ': ' + tweet.message + "             - tweeted @ " + tweet.created_at);
        //   $tweet.appendTo($body);
        //   index -= 1;
        // }

        updateTweets();

        


      });

      function updateTweets(){
            
            console.log(streams.home.length);
            console.log(streams.home);

            for(var x = streams.home.length - 1; x >= first_undisplayed; x--){
                var tweet = streams.home[x];
                var $tweet = $('<div></div>');
                var link = $("<a href='#'>" + "@" + tweet.user + ": " + "</a>");
                $tweet.text(tweet.message + " - tweeted @ " + tweet.created_at);
                $tweet.prepend(link);
                $tweet.appendTo($('body'));
            }

            first_undisplayed = streams.home.length;

        }

      
    </script>
    
  </body>
</html>
